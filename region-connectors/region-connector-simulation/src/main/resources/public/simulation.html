<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
  <script src="set-connection-status.js" type="module"></script>
  <script src="produce-consumption-records.js" type="module"></script>
  <title>EDDIE Connector Simulation</title>
  <script>
    window.addEventListener("load", (_event) => {
      const entries = window.location.hash.substring(2).split("&").map(it => it.split("="));
      const urlParameters = Object.fromEntries(entries);
      const connectionId = decodeURIComponent(urlParameters.connectionId);
      const dataNeedId = decodeURIComponent(urlParameters.dataNeedId);
      document.querySelectorAll("[data-set-connectionid]").forEach(it => it.setAttribute("connection-id", connectionId));
      document.querySelectorAll("[data-set-dataneedid]").forEach(it => it.setAttribute("dataneed-id", dataNeedId));
    });
  </script>
</head>
<body class="container">
<h1>EDDIE Connector Simulation</h1>
<set-connection-status data-set-connectionid></set-connection-status>
<produce-consumption-records data-set-connectionid data-set-dataneedid></produce-consumption-records>
</body>
</html>
