<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="common-parameters-form.js" type="module"></script>
    <script src="set-connection-status.js" type="module"></script>
    <script src="produce-simulated-meter-reading.js" type="module"></script>
    <title>EDDIE Connector Simulation</title>
    <script>
      window.addEventListener("load", (_event) => {
        const entries = window.location.search
          .substring(1)
          .split("&")
          .map((it) => it.split("="));
        const urlParameters = Object.fromEntries(entries);
        const commonParametersForm = document.getElementById(
          "commonParametersFromId"
        );
        commonParametersForm.setAttribute(
          "connection-id",
          decodeURIComponent(urlParameters.connectionId)
        );
        commonParametersForm.setAttribute(
          "data-need-id",
          decodeURIComponent(urlParameters.dataNeedId)
        );
      });
    </script>
  </head>
  <body class="container">
    <h1>EDDIE Connector Simulation</h1>
    <common-parameters-form id="commonParametersFromId"></common-parameters-form>
    <set-connection-status></set-connection-status>
    <produce-simulated-meter-reading></produce-simulated-meter-reading>
  </body>
</html>
