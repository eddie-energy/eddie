package energy.eddie.regionconnector.at.api;



import energy.eddie.api.agnostic.process.model.TimeframedPermissionRequest;

import java.util.Optional;

public interface AtPermissionRequest extends TimeframedPermissionRequest {
    /**
     * The CM Request ID of this permission request.
     *
     * @return cmRequestId
     */
    String cmRequestId();

    /**
     * In austria every conversation with the permission administrator requires a conversation id.
     * For a permission request this id is generated by eddie.
     *
     * @return conversationId
     */
    String conversationId();

    /**
     * In austria every permission request is associated with exactly one metering point.
     * When the request is sent without a metering point id, the user is asked to select a metering point in his DSO web portal.
     * So it can be empty in the beginning, but it will always be set once the request has been accepted.
     *
     * @return meteringPointId
     */
    Optional<String> meteringPointId();

    /**
     * EDA will generate a consentId for a permission request after it was accepted.
     * So this ID is only available after accepting the permission request.
     *
     * @return consentId
     */
    Optional<String> consentId();

    /**
     * Message that describes why the state transition happened.
     *
     * @return stateTransitionMessage
     */
    String stateTransitionMessage();

    /**
     * Sets the state transition message.
     *
     * @param message Message that describes why the state transition happened.
     */
    void setStateTransitionMessage(String message);

    /**
     * Sets the metering point id.
     * Needed, when the request is performed with only the dsoId.
     *
     * @param meteringPointId The metering point id.
     */
    void setMeteringPointId(String meteringPointId);

    /**
     * Method to set the consentId once it is available.
     *
     * @param consentId The consentId of the accepted request.
     */
    void setConsentId(String consentId);
}